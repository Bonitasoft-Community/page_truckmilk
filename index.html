<!doctype html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <title>Truck Milk</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <!-- 
    <link rel="stylesheet" href="pageResource?page=custompage_truckmilk&location=css/animate.css" />
    <link rel="stylesheet" href="pageResource?page=custompage_truckmilk&location=css/bootstrap.min.css">
	<link rel="stylesheet" href="pageResource?page=custompage_truckmilk&location=css/main.css">
	<link rel="stylesheet" href="pageResource?page=custompage_truckmilk&location=css/style.css">
	<link rel="stylesheet" href="pageResource?page=custompage_truckmilk&location=css/customPage.css">
 
  -->
  <link rel="stylesheet" href="css/animate.css" />
    <link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="css/style.css">
 
 
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script type="text/javascript" src="https://www.google.com/uds/?file=visualization&amp;v=1&amp;hl=fr&amp;packages=corechart&amp;async=2"></script>
	<link type="text/css" href="https://www.google.com/uds/api/visualization/1.0/ff67c3772da186a412ae3231c32409e9/ui+fr.css" rel="stylesheet">
	<script type="text/javascript" src="https://www.google.com/uds/api/visualization/1.0/ff67c3772da186a412ae3231c32409e9/format+fr,default+fr,ui+fr,corechart+fr.I.js"></script>
	<link href="https://ajax.googleapis.com/ajax/static/modules/gviz/1.0/core/tooltip.css" rel="stylesheet" type="text/css">
		
		
	<!--  for the autocomplete -->
	<link rel="stylesheet" href="pageResource?page=custompage_truckmilk&location=css/angular-material.min.css"> 

	
	 	
	
<style>
.Loading {
    display: inline-block;
    vertical-align: middle;
    background-position: center;
    background:no-repeat;
    background-image: url('data:image/gif;base64,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');
    width:20px;
    height:20px;
    margin-top:6px;
    margin-right:7px;
}
.AutocompleteDropDown {
	background-color: #fcf8e3;
	}
</style>
	 
</head>
<body ng-app="truckmilk">

<!--  Page Directory: @_PAGEDIRECTORY_@ -->


<div class="container" id="accordion">


	<div class="bs-component"  ng-controller="TruckMilkControler as ctrl">
		
		<center>
		<table><tr><td><h1>Truck Milk</h1></td><td rowspan="2"><img src="pageResource?page=custompage_truckmilk&location=img/truckmilk.jpg" width="150" heigth="150" /></td></tr>
			<tr><td style="font-size:0.8em"> <a href="" ng-click="ctrl.showhistory( ! ctrl.isshowhistory )">V2.0</a></td></tr>
			<tr><td>
				<div id="showHistory" ng-show="ctrl.isshowhistory" style="border-width:2px;border-style:ridge;border-color:blue">
					1.0 2018 June 15<br>
					1.2 2018 Oct 29<br>
					2.0 2019 Jul 5				
				</div>
			</td></tr>
		</table>
		</center>
	

	
		<ul class="nav nav-tabs"  ng-class="{'nav-stacked': vertical, 'nav-justified': justified}" ng-transclude>
			<li ng-class="{active: active, disabled: false}" id="form-tab" heading="All" active="true" title="Tour" select="ctrl.navbaractiv == 'Tour'" class="{{ctrl.getNavClass('Tour')}}" style="">
				  <a ng-click="ctrl.navbaractiv = 'Tour';"   class="ng-binding">Tours</a>
			</li>
			<li ng-class="{active: active, disabled: false}" id="form-tab" heading="Groovy Code" active="true" title="Register a new tour" select="ctrl.navbaractiv == 'Register'" class="{{ctrl.getNavClass('register')}}" style="">
				  <a  ng-click="ctrl.navbaractiv='Register'"  class="ng-binding">Register a new Job</a>
			</li>
			<li ng-class="{active: active, disabled: false}" id="form-tab" heading="Timer" active="true" title="Maintenance" select="ctrl.navbaractiv == 'Maintenance'" class="{{ctrl.getNavClass('maintenance')}}" style="">
				  <a  ng-click="ctrl.navbaractiv='Maintenance'" class="ng-binding">Maintenance</a>
			</li>

		</ul>
		
		<!--  ************************************************************  -->	
		<!--  Tab Tours		 										-->
		<!--  ************************************************************  -->			
		<div class="col-lg-12" ng-show="ctrl.navbaractiv == 'Tour'">
			<div ng-show="ctrl.inprogress">
				<span class="Loading">.</span>Please wait, work in progress
			</div>
			<input ng-model="ctrl.autorefresh" type="checkbox">Automatic refresh</td> 
			<div ng-bind-html="ctrl.getHtml(ctrl.listevents )"></div>
		
			<div ng-show="ctrl.deploimentsuc.length >0 " class="alert alert-success">
				{{ctrl.deploimentsuc}}
			</div>
			<div ng-show="ctrl.deploimenterr.length >0 " class="alert alert-danger">
				{{ctrl.deploimenterr}}
			</div>
		
			<div class="alert alert-danger" role="alert" ng-show="ctrl.timererror.length > 0">{{ctrl.timererror}}</div>
			
			<button ng-click="ctrl.refresh( true )" class="btn btn-info btn-xs" ng-disabled="ctrl.inprogress">Refresh</button>
			
			<table class="table table-striped table-hover table-condensed" >
					<tr>
						<th>State</th>
						<th>Name</th>
						<th>Plug in</th>
						<th>Frequency</th>
						<th>Next Execution</th>
						<th>Last Execution</th>
						<th></th>
					</tr>
					<tbody ng-repeat="plugtour in ctrl.getListPlugTour() track by $index">
					<tr > 
						<td style="{{ctrl.getTourStyle(plugtour)}}">
							<div ng-show="plugtour.enable">
								<label class="label label-success btn-xs" >
									<span class="glyphicon glyphicon-ok-circle" > ACTIF
								</label>
								<button ng-click="ctrl.stopTour( plugtour )" class="btn btn-default btn-xs" ng-disabled="ctrl.inprogress">
									deactivate
								</button>
							</div>
							<div ng-show="! plugtour.enable">
								<label class="label label-default btn-xs" >
									<span class="glyphicon glyphicon-ban-circle"> INACTIF
								</label>
								<button ng-click="ctrl.startTour( plugtour )" class="btn btn-default btn-xs" ng-disabled="ctrl.inprogress">
									activate
								</button>
							</div>
						</td><td style="{{ctrl.getTourStyle(plugtour)}}">
							<a  ng-click="ctrl.removeTour( plugtour )">
								<span class="glyphicon glyphicon-trash" title="Delete the tour"></span>
							</a>
							{{plugtour.name}} <small>({{plugtour.id}})</small>
						</td><td style="{{ctrl.getTourStyle(plugtour)}}">
							{{plugtour.plugindisplayname}}
						</td><td style="{{ctrl.getTourStyle(plugtour)}}">							
								<a  ng-click="ctrl.showSchedule( plugtour )">
									<span class="glyphicon glyphicon-time" title="Show the schedule"></span>
								</a>
								{{plugtour.cron}}
						</td><td style="{{ctrl.getTourStyle(plugtour)}}">
								{{plugtour.nextexecutionst}}
								<button ng-click="ctrl.immediateTour( plugtour )" class="{{ctrl.getNowStyle( plugtour)}}" ng-disabled="ctrl.inprogress" title="{{ctrl.getNowTitle( plugtour)}}">
									Now
								</button>	
							
						</td><td style="{{ctrl.getTourStyle(plugtour)}}">
								{{plugtour.lastexecutionstatus}}
																
						</td><td style="{{ctrl.getTourStyle(plugtour)}}">
								<a  ng-click="ctrl.showparameters( plugtour )">
									<span class="glyphicon glyphicon-cog" title="Show parameters"></span>
								</a>

								<a  ng-click="ctrl.showreport( plugtour )">
									<span class="glyphicon glyphicon-file" title="Show the report" ></span>
								</a>
						</td>
					</tr>
					
					<tr ng-show="plugtour.show.schedule">
						<td style="{{ctrl.getTourStyle(plugtour)}}"></td>
						<td colspan="6" style="{{ctrl.getTourStyle(plugtour)}}">
							<table width="100%">
								<tr><td><h5>Schedule</h5></td><td style="width: 10px">
									<a  ng-click="ctrl.hideall( plugtour )" >
										<span class="glyphicon glyphicon-remove" ></span>
									</a>
								</td>
								</tr>
								<tr><td colspan="2">
									<input ng-model="plugtour.cron" maxlength="30" style="width:100%;padding: 0px 5px;margin: 8px 0;box-sizing: border-box;" />
									<div class="alert alert-default">
										Use a Cron definition string. Visit <a href="https://www.freeformatter.com/cron-expression-generator-quartz.html" target="blanck" style="color:black">Quartz Cron Editor</a><p>
										Format is "second minute hour day month dayOfWeek week"<br>
										<ul>
										<li> <b>*</b>  means "every" : every minute is 0 * * * * *
										<li> <b>/</b> give a frequency : every 10 minutes is 0 0/10 0 ? * * *
										<li> <b>,</b> to give multiple value : at 3 and 4 in the morning is 0 0 3,4 * * * *
										</ul>
									</div>
									<center>
										<button ng-click="ctrl.updatePlugtour( plugtour)" class="btn btn-primary btn-xs" ng-disabled="ctrl.inprogress"> <span ng-show="ctrl.inprogress">{{ctrl.listUrlPercent}} % </span> Update</button>												
									</center>
								</td>
								</tr>
							</table>
								
								
						</td>
					</tr>
					<tr ng-show="plugtour.show.parameters">
						<td style="{{ctrl.getTourStyle(plugtour)}}"></td>
						<td colspan="6" style="{{ctrl.getTourStyle(plugtour)}}">
							<table width="100%">
								<tr>
									<td colspan="2"><h4>Parameters</h4> <input ng-model="plugtour.show.parametersexpl" type="checkbox">explanation</td>
								</td>
									<td style="width: 10px">
										<a  ng-click="ctrl.hideall( plugtour )" >
											<span class="glyphicon glyphicon-remove" ></span>
										</a>
									</td>
								</tr>
							</table>
							
							<table width="100%">
								<tr style="vertical-align: top; border-top: 1px solid #ddd;">
									<td>Name</td>
									<td><input ng-model="plugtour.newname" size="50"></input></td>
								</tr>
								<tr style="vertical-align: top; border-top: 1px solid #ddd;">
									<td>Description</td>
									<td><textarea rows="4" cols="50" ng-model="plugtour.description"></textarea></td>
								</tr>
								<tr>
									<td>Explanations</td>
									<td>
										<div ng-show="plugtour.show.parametersexpl" class="well">
											<div ng-bind-html="ctrl.getHtml(plugtour.explanation)"></div>
										</div>
									</td>
								</tr>
								<!-- <td colspan="2">Parameters value = {{plugtour.parametersdef}}</td> -->
								<tr ng-repeat="parameterdef in plugtour.parametersdef">
									<td style="vertical-align: top; border-top: 1px solid #ddd;">{{parameterdef.name}}<br>
									<div ng-show="plugtour.show.parametersexpl" style="font-size: small; font-style: italic;font-weight: bold"><div ng-bind-html="ctrl.getHtml(parameterdef.explanation)"></div></div>
									</td>
									<td style="vertical-align: top; border-top: 1px solid #ddd;">

										<!--  PROCESSNAME, STRING, TEXT, LONG, OBJECT, ARRAY, BOOLEAN -->
										<!-- Type={{parameterdef.type}} / Value={{parameterdef.value}}
										parameterDef={{parameterdef}} -->
										
										<div ng-if="parameterdef.type ==='PROCESSNAME'">
											<span ng-show="parameterdef.inprogress"   class="Loading"></span>
											<md-autocomplete md-selected-item="parameterdef.value" 
												md-search-text="plugtour.parametersvalue[ parameterdef.name ]" 
												md-items="item in ctrl.query( 'queryprocess', plugtour.parametersvalue[ parameterdef.name ], parameterdef )" 
												md-item-text="item.display" md-delay="500"
											 	md-floating-label="Process name"
							    				md-clear-button="false" 
							    				style="width:300px" 
							    				md-menu-class="AutocompleteDropDown">
												  <span md-highlight-text="parameterdef.value">{{item.display}}</span>
											</md-autocomplete>
											
										</div>
													
										<div ng-if="parameterdef.type ==='USERNAME'">
											<md-autocomplete md-selected-item="parameterdef.value" 
												md-search-text="parameterdef.value_search" 
												md-items="item in ctrl.query( 'queryusers', plugtour.parametersvalue[ parameterdef.name ], parameterdef)" 
												md-item-text="item.display" md-delay="500"
											 	md-floating-label="Process name"
							    				md-clear-button="false" 
							    				style="width:300px" 
							    				md-menu-class="AutocompleteDropDown">
												  <span md-highlight-text="parameterdef.value">{{item.display}}</span>
											</md-autocomplete>
										
										</div>							
																<!-- parameterdef.value -->
										<div ng-if="parameterdef.type ==='STRING'">
											<input ng-model="plugtour.parametersvalue[ parameterdef.name ]" maxlength="100" size="80" style="padding: 0px 5px;margin: 8px 0;box-sizing: border-box;" >
										</div>
										<div ng-if="parameterdef.type ==='TEXT'">
											<textarea ng-model="plugtour.parametersvalue[ parameterdef.name ]" rows="4" cols="50" style="padding: 0px 5px;margin: 8px 0;box-sizing: border-box;" ></textarea>
										</div>
										<div ng-if="parameterdef.type ==='LONG'">
											<input ng-model="plugtour.parametersvalue[ parameterdef.name ]" type="number" style="padding: 0px 5px;margin: 8px 0;box-sizing: border-box;" >
										</div>
										<div ng-if="parameterdef.type ==='ARRAY'">
											<table class="table table-stripped">
												<tr ng-repeat="paramarrayvalue in plugtour.parametersvalue[ parameterdef.name ] track by $index">
													<td>
														<table> <!--  stay on the same line -->
															<tr><td>
															<input ng-model="plugtour.parametersvalue[ parameterdef.name ] [ $index ]" maxlength="30" style="padding: 0px 5px;margin: 8px 0;box-sizing: border-box;" >&nbsp;
															</td><td>
															<button ng-click="ctrl.removeInArray( plugtour.parametersvalue[ parameterdef.name ], paramarrayvalue )" class="btn btn-danger btn-xs" ng-disabled="ctrl.inprogress">remove</button>
															</td></tr>
														</table>
												</tr>
											</table>											 
											<button ng-click="ctrl.addInArray(plugtour.parametersvalue[ parameterdef.name ], '')" class="btn btn-success btn-xs" ng-disabled="ctrl.inprogress">Add</button>
										</div>
										
										<div ng-if="parameterdef.type ==='BOOLEAN'">
											<input ng-model="plugtour.parametersvalue[ parameterdef.name ]" type="checkbox" style="padding: 0px 5px;margin: 8px 0;box-sizing: border-box;">
										</div>
										
										
										<div ng-if="parameterdef.type ==='ARRAYMAP'">
											<table class="table table-striped table-sm table-warning">
												<tr>
													<th ng-repeat="header in parameterdef.arraymapDefinition">
													{{header.title}}
													<div ng-show="plugtour.show.parametersexpl">{{header.tips}}</div>
													</th>
													<th></th>
												</tr>
												
												 
												<tr ng-repeat="item in plugtour.parametersvalue[ parameterdef.name ] track by $index">
													<td ng-repeat="header in parameterdef.arraymapDefinition">
														
														<input ng-model="item[ header.name ]" maxlength="100" size="30" style="padding: 0px 5px;margin: 8px 0;box-sizing: border-box;" title="{{plugtour.show.parametersexpl}}">&nbsp;
													</td>
													<td>
														<button ng-click="ctrl.removeInArray( plugtour.parametersvalue[ parameterdef.name ], item )" class="btn btn-danger btn-xs" ng-disabled="ctrl.inprogress">remove</button>
													</td>	
												</tr>
												
											</table>
											<button ng-click="ctrl.addInArray(plugtour.parametersvalue[ parameterdef.name ], {} )" class="btn btn-success btn-xs" ng-disabled="ctrl.inprogress">Add</button>
										</div>
											
										<div ng-if=" parameterdef.type==='BUTTONARGS'"> 
										<!--  list of args		parametersdef = {{parameterdef}} -->
										
											<table>
												<tr>
												<td>
													<table class="table table-striped table-sm table-warning">
													<tr ng-repeat="item in parameterdef.args track by $index">
														<td>
															{{item.name}}
														</td>
														<td>
															<input ng-model="plugtour.parametersvalue[ parameterdef.name ] [ item.name ]" maxlength="100" size="30" style="padding: 0px 5px;margin: 8px 0;box-sizing: border-box;" >&nbsp;
														</td>
													</tr>												
													</table>
												</td>
												<td>
													{{parameterdef.buttonDescription}}<p>
													<button ng-click="ctrl.testbutton(parameterdef, plugtour)" class="btn btn-info btn-xs" ng-disabled="ctrl.inprogress">Execute {{parameterdef.name}}</button>
													
													
												</td>
												</tr>
											</table>
											<div ng-bind-html="ctrl.getHtml( parameterdef.listeventsexecution)"></div>
							
										</div>																			
										 
									</td>
								</tr>

								<!-- <tr><td colspan="2">parameters=<div class="alert alert-primary">{{plugtour}}</div></td></tr>-->
								<!-- <tr><td  colspan="2">parametersvalue=<div class="alert alert-primary">{{plugtour.parametersvalue}}</div></td></tr> -->
								<!-- <tr><td colspan="2">parametersvalue_2=<div class="alert alert-danger">{{plugtour.parametersvalue2}}</div></td></tr> -->
								 
							</table>
							<center> 
								<button ng-click="ctrl.updatePlugtour( plugtour)" class="btn btn-primary btn-xs" ng-disabled="ctrl.inprogress"> <span ng-show="ctrl.inprogress">Update {{ctrl.postParam.advPercent}} % </span> Update</button>
							</center>
							
							<div ng-bind-html="ctrl.getHtml( ctrl.listeventsexecution)"></div>
							
							
						</td>
					</tr>
					<tr ng-show="plugtour.show.report">
						<td style="{{ctrl.getTourStyle(plugtour)}}"></td>
						<td colspan="6" style="{{ctrl.getTourStyle(plugtour)}}">
							<table width="100%">
								<tr><td><h5>Report</h5></td><td style="width: 10px">
									<a  ng-click="ctrl.hideall( plugtour )" >
										<span class="glyphicon glyphicon-remove" ></span>
									</a>
								</td></tr>
							</table>
							<table style="border-spacing: 10px 0px;border-collapse: separate;">
								<tr><td>Last execution</td><td><small>{{plugtour.lastexecutionst}}</small></td></tr>
								<tr><td>Next execution</td><td>{{plugtour.nextexecutionst}}</td></tr>
								<tr><td>Status</td><td>{{plugtour.lastexecutionstatus}}</td></tr>
							</table>
							
							<h5>History</h5>
							
							<table class="table table-striped table-hover table-condensed" >
								<tr>
									<th>Date</th>
									<th>Status</th>
									<th>Item processed</th>
									<th>Execution time (ms)</th>
									<th>Details</th>
									
								<tr ng-repeat="savedExec in plugtour.savedExecution" >
									<td>{{savedExec.execDateSt}}</td>
									<td>{{savedExec.status}}</td>
									<td style="text-align:right">{{savedExec.itemprocessed}}</td>
									<td style="text-align:right">{{savedExec.timeinms}}</td>
									<td><div ng-bind-html="ctrl.getHtml( savedExec.listevents )"></div></td>
								</tr>
							</table>
								
						</td>
					</tr>
					<!-- 
					<tr><td colspan="7">
					 <div class="alert alert-success">{{plugtour.parametersvalue}}</div> 
					 <div class="alert alert-primary">{{plugtour}}</div> 
					 
					</td></tr>
					 -->
					<tr >
					<td colspan="5"> <div ng-bind-html="ctrl.getHtml(plugtour.listevents )"></div>
					</td>
					</tr>
					
					</tbody>
				</table>
		</div>
		
		<!--  ************************************************************  -->	
		<!--  Tab Register		 										-->
		<!--  ************************************************************  -->			
		<div  class="col-lg-12" ng-show="ctrl.navbaractiv == 'Register'">
			Choose the plug in you want to use, then add it. You will configure it in the list after. 
			<table style="width:100%">
					<tr><td style="padding: 10px;">Plug in:</td><td>
						<select ng-model="ctrl.registerPlugin"  >
							<option ng-repeat="item in ctrl.getListPlugIn()" value="{{item.name}}">{{item.displayname}}</option>
						</select>
					</td></tr>
					<tr><td style="padding: 10px;">Name:</td><td>
						<input  type="text" ng-model="ctrl.registerName"	size="50">
					</td></tr>
					<tr><td colspan="2" style="padding: 10px;">
						<center>
							<button class="btn btn-info btn-xs" ng-click="ctrl.addTour(ctrl.registerPlugin, ctrl.registerName)" ng-disabled="ctrl.inprogress" >Register a new Tour</button>
						</center>
					</td></tr>
			</table>
				<div ng-bind-html="ctrl.getHtml(ctrl.addlistevents )"></div>
		
		</div> <!--  end listTour -->

	
		<!--  ************************************************************  -->	
		<!--  Tab Maintenance		 										-->
		<!--  ************************************************************  -->			
		<div  class="col-lg-12" ng-show="ctrl.navbaractiv == 'Maintenance'">
	
		
			<div ng-show="ctrl.inprogress">
				<span class="Loading">.</span>Please wait, work in progress
			</div>
			<button ng-click="ctrl.refresh( true )" class="btn btn-info btn-xs" ng-disabled="ctrl.inprogress">Get Status</button>
		
			<!--  <div class="alert alert-success">Scheduler={{ctrl.scheduler}}</div> -->
			<table style="width:100%;border-spacing: 10px 0px;border-collapse: separate; ">
			<tr>
			<td>
				<table>
					<tr><td style="padding: 10px;">Type: </td><td style="padding: 10px;">{{ctrl.scheduler.type}}</td></tr>
					<tr><td style="padding: 10px;">Info: </td><td style="padding: 10px;">{{ctrl.scheduler.info}}</td></tr>
				</table>	
			
				<h3>
				<div ng-show="ctrl.scheduler.status=='STARTED'">
					<div class="label label-success " >
						<span class="glyphicon glyphicon-ok-circle" > ACTIF
					</div>
					<button ng-click="ctrl.schedulerOperation( false )" class="btn btn-primary btn-xs" ng-disabled="ctrl.inprogress">
						Stop
					</button>
				</div>
				<div ng-show="ctrl.scheduler.status=='SHUTDOWN'">
					<div class="label label-warning" >
						<span class="glyphicon glyphicon-ok-circle" > SHUTDOWN
					</div>
					<button ng-click="ctrl.schedulerOperation( true )" class="btn btn-primary btn-xs" ng-disabled="ctrl.inprogress">
						Start
					</button>
				</div>
				<div ng-show="ctrl.scheduler.status=='STOPPED'">					
					<div class="label label-default" >
						<span class="glyphicon glyphicon-ban-circle"> INACTIF
					</div>
					<button ng-click="ctrl.schedulerOperation( true )" class="btn btn-info btn-xs" ng-disabled="ctrl.inprogress">
						Start
					</button>
				</div>
				</h3>
			
				<!--  status of last operation -->
				<div ng-bind-html="ctrl.getHtml(ctrl.scheduler.listevents )"></div>
				
			</td>
			<td>
			
				<div class="panel panel-warning"   >
					<div class="panel-heading">
						Maintenance
					</div>
					<div>
						<table >
							<tr>
								<td style="padding: 10px;">	
									<button ng-click="ctrl.schedulerMaintenance('deploy')" class="btn btn-warning btn-xs" ng-disabled="ctrl.inprogress">
										Deploy
									</button>
								</td><td style="padding: 10px;">
									<button ng-click="ctrl.schedulerMaintenance('reset')" class="btn btn-warning btn-xs" ng-disabled="ctrl.inprogress">
										Reset
									</button>
								</td><td style="padding: 10px;">
									<select ng-model="ctrl.scheduler.selectscheduler"  >
										<option ng-repeat="item in ctrl.getListTypeScheduler()" value="{{item}}">{{item}}</option>
									</select>
									<button ng-click="ctrl.schedulerMaintenance('changescheduler')" class="btn btn-danger btn-xs" ng-disabled="ctrl.inprogress">
										Change the scheduler
									</button>
								</td>
							</tr>
						</table>
					</div>
				</div>
			</td>
			</tr>
			</table>
			<p>
			
			<table style="width:100%;border-spacing: 10px 0px;border-collapse: separate; ">
			<tr>
			<td style="vertical-align:top">	
				<div class="panel panel-info"  class="col-lg-6" >
					<div class="panel-heading">
						Last execution status
					</div>
					<div>
						<table class="table table-striped table-hover table-condensed" >
							<tr ng-repeat="exec in ctrl.scheduler.lastheartbeat"><td>{{exec}}</td></tr>
						</table>
					</div>
				</div>
			
			</td><td style="vertical-align:top">			
				<div class="panel panel-info"  class="col-lg-6" >
					<div class="panel-heading">
						Information
					</div>
					<div style="border-spacing: 10px 0px;border-collapse: separate;" >
						<p>
						<div ng-show="! ctrl.scheduler.details">
							<div ng-bind-html="ctrl.getHtml(ctrl.scheduler.dashboardsyntheticlistevents )"></div>
						</div>
						<div ng-show="ctrl.scheduler.details">
							<div ng-bind-html="ctrl.getHtml(ctrl.scheduler.dashboardlistevents )"></div>
						</div>
						<input type="checkbox" ng-model="ctrl.scheduler.details">Details</input>
					</div>
				</div>
			</td></tr>			
			</table>
		</div> <!--  end maintenance -->

		<!-- Register a new plug in 
		<div class="col-lg-12">	
			<legend class="text-primary"><span class="glyphicon glyphicon-th"></span>Plug In</legend>	
			<div ng-show="ctrl.inprogress">
				<span class="Loading">.</span>Please wait, work in progress
			</div>
					
			<button class="btn btn-info" ng-disabled="ctrl.inprogress">Register a new PlugIn</button>
		</div>
		 -->
	</div> <!-- end class component-->
	
</div>



<!-- Third party dependencies -->
<script src="pageResource?page=custompage_truckmilk&location=3rd-party/jquery.min.js"></script>
	<script src="pageResource?page=custompage_truckmilk&location=3rd-party/angular_155/angular.min.js"></script>
	
	<!-- <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script> 
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-animate.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-aria.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-messages.min.js"></script> -->
		<!--  Material -->  

<script src="pageResource?page=custompage_truckmilk&location=3rd-party/angular_155/angular-animate.min.js"></script>  
<script src="pageResource?page=custompage_truckmilk&location=3rd-party/angular_155/angular-aria.min.js"></script>  
<script src="pageResource?page=custompage_truckmilk&location=3rd-party/angular_155/angular-messages.min.js"></script> 
<script src="pageResource?page=custompage_truckmilk&location=3rd-party/angular-material.min.js"></script>  

<script src="pageResource?page=custompage_truckmilk&location=3rd-party/angular-resource.min.js"></script>
<script src="pageResource?page=custompage_truckmilk&location=3rd-party/angular-cookies.min.js"></script>

<script src="pageResource?page=custompage_truckmilk&location=3rd-party/bootstrap/js/bootstrap.min.js"></script>
<script src="pageResource?page=custompage_truckmilk&location=3rd-party/angular-bootstrap-tpls.min.js"></script>
<script src="pageResource?page=custompage_truckmilk&location=3rd-party/angular-file-upload.js"></script> 
<script src="pageResource?page=custompage_truckmilk&location=3rd-party/ng-google-chart.js"></script> 

<script src="pageResource?page=custompage_truckmilk&location=3rd-party/angular-sanitize.min.js"></script>


<!-- Application dependencies -->
<script src="pageResource?page=custompage_truckmilk&location=truckmilkmonitor.js&v=@_CURRENTTIMEMILIS_@"></script>

</body>
</html>		